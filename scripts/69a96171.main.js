function initPlugin(){FSS={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"},FSS.Array="function"==typeof Float32Array?Float32Array:Array,FSS.Utils={isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)}},function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;b.length>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(a,b){return a+(b-a)*Math.random()},Math.clamp=function(a,b,c){return a=Math.max(a,b),a=Math.min(a,c)},FSS.Vector3={create:function(a,b,c){var d=new FSS.Array(3);return this.set(d,a,b,c),d},clone:function(a){var b=this.create();return this.copy(b,a),b},set:function(a,b,c,d){return a[0]=b||0,a[1]=c||0,a[2]=d||0,this},setX:function(a,b){return a[0]=b||0,this},setY:function(a,b){return a[1]=b||0,this},setZ:function(a,b){return a[2]=b||0,this},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],this},add:function(a,b){return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],this},addVectors:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],this},addScalar:function(a,b){return a[0]+=b,a[1]+=b,a[2]+=b,this},subtract:function(a,b){return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],this},subtractVectors:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],this},subtractScalar:function(a,b){return a[0]-=b,a[1]-=b,a[2]-=b,this},multiply:function(a,b){return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],this},multiplyVectors:function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],this},multiplyScalar:function(a,b){return a[0]*=b,a[1]*=b,a[2]*=b,this},divide:function(a,b){return a[0]/=b[0],a[1]/=b[1],a[2]/=b[2],this},divideVectors:function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],this},divideScalar:function(a,b){return 0!==b?(a[0]/=b,a[1]/=b,a[2]/=b):(a[0]=0,a[1]=0,a[2]=0),this},cross:function(a,b){var c=a[0],d=a[1],e=a[2];return a[0]=d*b[2]-e*b[1],a[1]=e*b[0]-c*b[2],a[2]=c*b[1]-d*b[0],this},crossVectors:function(a,b,c){return a[0]=b[1]*c[2]-b[2]*c[1],a[1]=b[2]*c[0]-b[0]*c[2],a[2]=b[0]*c[1]-b[1]*c[0],this},min:function(a,b){return b>a[0]&&(a[0]=b),b>a[1]&&(a[1]=b),b>a[2]&&(a[2]=b),this},max:function(a,b){return a[0]>b&&(a[0]=b),a[1]>b&&(a[1]=b),a[2]>b&&(a[2]=b),this},clamp:function(a,b,c){return this.min(a,b),this.max(a,c),this},limit:function(a,b,c){var d=this.length(a);return null!==b&&b>d?this.setLength(a,b):null!==c&&d>c&&this.setLength(a,c),this},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},normalise:function(a){return this.divideScalar(a,this.length(a))},negate:function(a){return this.multiplyScalar(a,-1)},distanceSquared:function(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e},distance:function(a,b){return Math.sqrt(this.distanceSquared(a,b))},lengthSquared:function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]},length:function(a){return Math.sqrt(this.lengthSquared(a))},setLength:function(a,b){var c=this.length(a);return 0!==c&&b!==c&&this.multiplyScalar(a,b/c),this}},FSS.Vector4={create:function(a,b,c){var d=new FSS.Array(4);return this.set(d,a,b,c),d},set:function(a,b,c,d,e){return a[0]=b||0,a[1]=c||0,a[2]=d||0,a[3]=e||0,this},setX:function(a,b){return a[0]=b||0,this},setY:function(a,b){return a[1]=b||0,this},setZ:function(a,b){return a[2]=b||0,this},setW:function(a,b){return a[3]=b||0,this},add:function(a,b){return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],this},multiplyVectors:function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],this},multiplyScalar:function(a,b){return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,this},min:function(a,b){return b>a[0]&&(a[0]=b),b>a[1]&&(a[1]=b),b>a[2]&&(a[2]=b),b>a[3]&&(a[3]=b),this},max:function(a,b){return a[0]>b&&(a[0]=b),a[1]>b&&(a[1]=b),a[2]>b&&(a[2]=b),a[3]>b&&(a[3]=b),this},clamp:function(a,b,c){return this.min(a,b),this.max(a,c),this}},FSS.Color=function(a,b){this.rgba=FSS.Vector4.create(),this.hex=a||"#000000",this.opacity=FSS.Utils.isNumber(b)?b:1,this.set(this.hex,this.opacity)},FSS.Color.prototype={set:function(a,b){a=a.replace("#","");var c=a.length/3;return this.rgba[0]=parseInt(a.substring(0*c,1*c),16)/255,this.rgba[1]=parseInt(a.substring(1*c,2*c),16)/255,this.rgba[2]=parseInt(a.substring(2*c,3*c),16)/255,this.rgba[3]=FSS.Utils.isNumber(b)?b:this.rgba[3],this},hexify:function(a){var b=Math.ceil(255*a).toString(16);return 1===b.length&&(b="0"+b),b},format:function(){var a=this.hexify(this.rgba[0]),b=this.hexify(this.rgba[1]),c=this.hexify(this.rgba[2]);return this.hex="#"+a+b+c,this.hex}},FSS.Object=function(){this.position=FSS.Vector3.create()},FSS.Object.prototype={setPosition:function(a,b,c){return FSS.Vector3.set(this.position,a,b,c),this}},FSS.Light=function(a,b){FSS.Object.call(this),this.ambient=new FSS.Color(a||"#FFFFFF"),this.diffuse=new FSS.Color(b||"#FFFFFF"),this.ray=FSS.Vector3.create()},FSS.Light.prototype=Object.create(FSS.Object.prototype),FSS.Vertex=function(a,b,c){this.position=FSS.Vector3.create(a,b,c)},FSS.Vertex.prototype={setPosition:function(a,b,c){return FSS.Vector3.set(this.position,a,b,c),this}},FSS.Triangle=function(a,b,c){this.a=a||new FSS.Vertex,this.b=b||new FSS.Vertex,this.c=c||new FSS.Vertex,this.vertices=[this.a,this.b,this.c],this.u=FSS.Vector3.create(),this.v=FSS.Vector3.create(),this.centroid=FSS.Vector3.create(),this.normal=FSS.Vector3.create(),this.color=new FSS.Color,this.polygon=document.createElementNS(FSS.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},FSS.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],FSS.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return FSS.Vector3.subtractVectors(this.u,this.b.position,this.a.position),FSS.Vector3.subtractVectors(this.v,this.c.position,this.a.position),FSS.Vector3.crossVectors(this.normal,this.u,this.v),FSS.Vector3.normalise(this.normal),this}},FSS.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},FSS.Geometry.prototype={update:function(){if(this.dirty){var a,b;for(a=this.triangles.length-1;a>=0;a--)b=this.triangles[a],b.computeCentroid(),b.computeNormal();this.dirty=!1}return this}},FSS.Plane=function(a,b,c,d){FSS.Geometry.call(this),this.width=a||100,this.height=b||100,this.segments=c||4,this.slices=d||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var e,f,g,h,i,j,k,l=[],m=this.width*-.5,n=.5*this.height;for(e=0;this.segments>=e;e++)for(l.push([]),f=0;this.slices>=f;f++)k=new FSS.Vertex(m+e*this.segmentWidth,n-f*this.sliceHeight),l[e].push(k),this.vertices.push(k);for(e=0;this.segments>e;e++)for(f=0;this.slices>f;f++)g=l[e+0][f+0],h=l[e+0][f+1],i=l[e+1][f+0],j=l[e+1][f+1],t0=new FSS.Triangle(g,h,i),t1=new FSS.Triangle(i,h,j),this.triangles.push(t0,t1)},FSS.Plane.prototype=Object.create(FSS.Geometry.prototype),FSS.Material=function(a,b){this.ambient=new FSS.Color(a||"#444444"),this.diffuse=new FSS.Color(b||"#FFFFFF"),this.slave=new FSS.Color},FSS.Mesh=function(a,b){FSS.Object.call(this),this.geometry=a||new FSS.Geometry,this.material=b||new FSS.Material,this.side=FSS.FRONT,this.visible=!0},FSS.Mesh.prototype=Object.create(FSS.Object.prototype),FSS.Mesh.prototype.update=function(a,b){var c,d,e,f,g;if(this.geometry.update(),b)for(c=this.geometry.triangles.length-1;c>=0;c--){for(d=this.geometry.triangles[c],FSS.Vector4.set(d.color.rgba),e=a.length-1;e>=0;e--)f=a[e],FSS.Vector3.subtractVectors(f.ray,f.position,d.centroid),FSS.Vector3.normalise(f.ray),g=FSS.Vector3.dot(d.normal,f.ray),this.side===FSS.FRONT?g=Math.max(g,0):this.side===FSS.BACK?g=Math.abs(Math.min(g,0)):this.side===FSS.DOUBLE&&(g=Math.max(Math.abs(g),0)),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,f.ambient.rgba),FSS.Vector4.add(d.color.rgba,this.material.slave.rgba),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,f.diffuse.rgba),FSS.Vector4.multiplyScalar(this.material.slave.rgba,g),FSS.Vector4.add(d.color.rgba,this.material.slave.rgba);FSS.Vector4.clamp(d.color.rgba,0,1)}return this},FSS.Scene=function(){this.meshes=[],this.lights=[]},FSS.Scene.prototype={add:function(a){return a instanceof FSS.Mesh&&!~this.meshes.indexOf(a)?this.meshes.push(a):a instanceof FSS.Light&&!~this.lights.indexOf(a)&&this.lights.push(a),this},remove:function(a){return a instanceof FSS.Mesh&&~this.meshes.indexOf(a)?this.meshes.splice(this.meshes.indexOf(a),1):a instanceof FSS.Light&&~this.lights.indexOf(a)&&this.lights.splice(this.lights.indexOf(a),1),this}},FSS.Renderer=function(){this.width=0,this.height=0,this.halfWidth=0,this.halfHeight=0},FSS.Renderer.prototype={setSize:function(a,b){return this.width!==a||this.height!==b?(this.width=a,this.height=b,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this):void 0},clear:function(){return this},render:function(){return this}},FSS.CanvasRenderer=function(){FSS.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},FSS.CanvasRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.CanvasRenderer.prototype.setSize=function(a,b){return FSS.Renderer.prototype.setSize.call(this,a,b),this.element.width=a,this.element.height=b,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},FSS.CanvasRenderer.prototype.clear=function(){return FSS.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},FSS.CanvasRenderer.prototype.render=function(a){FSS.Renderer.prototype.render.call(this,a);var b,c,d,e,f;for(this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,b=a.meshes.length-1;b>=0;b--)if(c=a.meshes[b],c.visible)for(c.update(a.lights,!0),d=c.geometry.triangles.length-1;d>=0;d--)e=c.geometry.triangles[d],f=e.color.format(),this.context.beginPath(),this.context.moveTo(e.a.position[0],e.a.position[1]),this.context.lineTo(e.b.position[0],e.b.position[1]),this.context.lineTo(e.c.position[0],e.c.position[1]),this.context.closePath(),this.context.strokeStyle=f,this.context.fillStyle=f,this.context.stroke(),this.context.fill();return this},FSS.WebGLRenderer=function(){FSS.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.vertices=null,this.lights=null;var a={preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0,stencil:!0,alpha:!0};return this.gl=this.getContext(this.element,a),this.unsupported=!this.gl,this.unsupported?"WebGL is not supported by your browser.":(this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.DEPTH_TEST),void this.setSize(this.element.width,this.element.height))},FSS.WebGLRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.WebGLRenderer.prototype.getContext=function(a,b){var c=!1;try{if(!(c=a.getContext("experimental-webgl",b)))throw"Error creating WebGL context."}catch(d){console.error(d)}return c},FSS.WebGLRenderer.prototype.setSize=function(a,b){return FSS.Renderer.prototype.setSize.call(this,a,b),this.unsupported?void 0:(this.element.width=a,this.element.height=b,this.gl.viewport(0,0,a,b),this)},FSS.WebGLRenderer.prototype.clear=function(){return FSS.Renderer.prototype.clear.call(this),this.unsupported?void 0:(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this)},FSS.WebGLRenderer.prototype.render=function(a){if(FSS.Renderer.prototype.render.call(this,a),!this.unsupported){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=!1,r=a.lights.length,s=0;if(this.clear(),this.lights!==r){if(this.lights=r,!(this.lights>0))return;this.buildProgram(r)}if(this.program){for(b=a.meshes.length-1;b>=0;b--)c=a.meshes[b],c.geometry.dirty&&(q=!0),c.update(a.lights,!1),s+=3*c.geometry.triangles.length;if(q||this.vertices!==s){this.vertices=s;for(i in this.program.attributes){for(k=this.program.attributes[i],k.data=new FSS.Array(s*k.size),n=0,b=a.meshes.length-1;b>=0;b--)for(c=a.meshes[b],d=0,e=c.geometry.triangles.length;e>d;d++)for(f=c.geometry.triangles[d],o=0,p=f.vertices.length;p>o;o++){switch(vertex=f.vertices[o],i){case"side":this.setBufferData(n,k,c.side);break;case"position":this.setBufferData(n,k,vertex.position);break;case"centroid":this.setBufferData(n,k,f.centroid);break;case"normal":this.setBufferData(n,k,f.normal);break;case"ambient":this.setBufferData(n,k,c.material.ambient.rgba);break;case"diffuse":this.setBufferData(n,k,c.material.diffuse.rgba)}n++}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,k.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,k.data,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(k.location),this.gl.vertexAttribPointer(k.location,k.size,this.gl.FLOAT,!1,0,0)}}for(this.setBufferData(0,this.program.uniforms.resolution,[this.width,this.height,this.width]),g=r-1;g>=0;g--)h=a.lights[g],this.setBufferData(g,this.program.uniforms.lightPosition,h.position),this.setBufferData(g,this.program.uniforms.lightAmbient,h.ambient.rgba),this.setBufferData(g,this.program.uniforms.lightDiffuse,h.diffuse.rgba);for(j in this.program.uniforms)switch(k=this.program.uniforms[j],m=k.location,l=k.data,k.structure){case"3f":this.gl.uniform3f(m,l[0],l[1],l[2]);break;case"3fv":this.gl.uniform3fv(m,l);break;case"4fv":this.gl.uniform4fv(m,l)}}return this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertices),this}},FSS.WebGLRenderer.prototype.setBufferData=function(a,b,c){if(FSS.Utils.isNumber(c))b.data[a*b.size]=c;else for(var d=c.length-1;d>=0;d--)b.data[a*b.size+d]=c[d]},FSS.WebGLRenderer.prototype.buildProgram=function(a){if(!this.unsupported){var b=FSS.WebGLRenderer.VS(a),c=FSS.WebGLRenderer.FS(a),d=b+c;if(!this.program||this.program.code!==d){var e=this.gl.createProgram(),f=this.buildShader(this.gl.VERTEX_SHADER,b),g=this.buildShader(this.gl.FRAGMENT_SHADER,c);if(this.gl.attachShader(e,f),this.gl.attachShader(e,g),this.gl.linkProgram(e),!this.gl.getProgramParameter(e,this.gl.LINK_STATUS)){var h=this.gl.getError(),i=this.gl.getProgramParameter(e,this.gl.VALIDATE_STATUS);return console.error("Could not initialise shader.\nVALIDATE_STATUS: "+i+"\nERROR: "+h),null}return this.gl.deleteShader(g),this.gl.deleteShader(f),e.code=d,e.attributes={side:this.buildBuffer(e,"attribute","aSide",1,"f"),position:this.buildBuffer(e,"attribute","aPosition",3,"v3"),centroid:this.buildBuffer(e,"attribute","aCentroid",3,"v3"),normal:this.buildBuffer(e,"attribute","aNormal",3,"v3"),ambient:this.buildBuffer(e,"attribute","aAmbient",4,"v4"),diffuse:this.buildBuffer(e,"attribute","aDiffuse",4,"v4")},e.uniforms={resolution:this.buildBuffer(e,"uniform","uResolution",3,"3f",1),lightPosition:this.buildBuffer(e,"uniform","uLightPosition",3,"3fv",a),lightAmbient:this.buildBuffer(e,"uniform","uLightAmbient",4,"4fv",a),lightDiffuse:this.buildBuffer(e,"uniform","uLightDiffuse",4,"4fv",a)},this.program=e,this.gl.useProgram(this.program),e}}},FSS.WebGLRenderer.prototype.buildShader=function(a,b){if(!this.unsupported){var c=this.gl.createShader(a);return this.gl.shaderSource(c,b),this.gl.compileShader(c),this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS)?c:(console.error(this.gl.getShaderInfoLog(c)),null)}},FSS.WebGLRenderer.prototype.buildBuffer=function(a,b,c,d,e,f){var g={buffer:this.gl.createBuffer(),size:d,structure:e,data:null};switch(b){case"attribute":g.location=this.gl.getAttribLocation(a,c);break;case"uniform":g.location=this.gl.getUniformLocation(a,c)}return f&&(g.data=new FSS.Array(f*d)),g},FSS.WebGLRenderer.VS=function(a){var b=["precision mediump float;","#define LIGHTS "+a,"attribute float aSide;","attribute vec3 aPosition;","attribute vec3 aCentroid;","attribute vec3 aNormal;","attribute vec4 aAmbient;","attribute vec4 aDiffuse;","uniform vec3 uResolution;","uniform vec3 uLightPosition[LIGHTS];","uniform vec4 uLightAmbient[LIGHTS];","uniform vec4 uLightDiffuse[LIGHTS];","varying vec4 vColor;","void main() {","vColor = vec4(0.0);","vec3 position = aPosition / uResolution * 2.0;","for (int i = 0; i < LIGHTS; i++) {","vec3 lightPosition = uLightPosition[i];","vec4 lightAmbient = uLightAmbient[i];","vec4 lightDiffuse = uLightDiffuse[i];","vec3 ray = normalize(lightPosition - aCentroid);","float illuminance = dot(aNormal, ray);","if (aSide == 0.0) {","illuminance = max(illuminance, 0.0);","} else if (aSide == 1.0) {","illuminance = abs(min(illuminance, 0.0));","} else if (aSide == 2.0) {","illuminance = max(abs(illuminance), 0.0);","}","vColor += aAmbient * lightAmbient;","vColor += aDiffuse * lightDiffuse * illuminance;","}","vColor = clamp(vColor, 0.0, 1.0);","gl_Position = vec4(position, 1.0);","}"].join("\n");return b},FSS.WebGLRenderer.FS=function(){var a=["precision mediump float;","varying vec4 vColor;","void main() {","gl_FragColor = vColor;","}"].join("\n");return a},FSS.SVGRenderer=function(){FSS.Renderer.call(this),this.element=document.createElementNS(FSS.SVGNS,"svg"),this.element.setAttribute("xmlns",FSS.SVGNS),this.element.setAttribute("version","1.1"),this.element.style.display="block",this.setSize(300,150)},FSS.SVGRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.SVGRenderer.prototype.setSize=function(a,b){return FSS.Renderer.prototype.setSize.call(this,a,b),this.element.setAttribute("width",a),this.element.setAttribute("height",b),this},FSS.SVGRenderer.prototype.clear=function(){FSS.Renderer.prototype.clear.call(this);for(var a=this.element.childNodes.length-1;a>=0;a--)this.element.removeChild(this.element.childNodes[a]);return this},FSS.SVGRenderer.prototype.render=function(a){FSS.Renderer.prototype.render.call(this,a);var b,c,d,e,f,g;for(b=a.meshes.length-1;b>=0;b--)if(c=a.meshes[b],c.visible)for(c.update(a.lights,!0),d=c.geometry.triangles.length-1;d>=0;d--)e=c.geometry.triangles[d],e.polygon.parentNode!==this.element&&this.element.appendChild(e.polygon),f=this.formatPoint(e.a)+" ",f+=this.formatPoint(e.b)+" ",f+=this.formatPoint(e.c),g=this.formatStyle(e.color.format()),e.polygon.setAttributeNS(null,"points",f),e.polygon.setAttributeNS(null,"style",g);return this},FSS.SVGRenderer.prototype.formatPoint=function(a){return this.halfWidth+a.position[0]+","+(this.halfHeight-a.position[1])},FSS.SVGRenderer.prototype.formatStyle=function(a){var b="fill:"+a+";";return b+="stroke:"+a+";"}}function initBackground(){function a(){b(),d(),e(),f(),k(),g(o.offsetWidth,o.offsetHeight),h()}function b(){w=new FSS.WebGLRenderer,x=new FSS.CanvasRenderer,y=new FSS.SVGRenderer,c(config.background.RENDER.renderer)}function c(a){r&&p.removeChild(r.element),r=x,r.setSize(o.offsetWidth,o.offsetHeight),p.appendChild(r.element)}function d(){s=new FSS.Scene}function e(){s.remove(t),r.clear(),u=new FSS.Plane(config.background.MESH.width*r.width,config.background.MESH.height*r.height,config.background.MESH.segments,config.background.MESH.slices),v=new FSS.Material(config.background.MESH.ambient,config.background.MESH.diffuse),t=new FSS.Mesh(u,v),s.add(t);var a,b;for(a=u.vertices.length-1;a>=0;a--)b=u.vertices[a],b.anchor=FSS.Vector3.clone(b.position),b.step=FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),b.time=Math.randomInRange(0,Math.PIM2)}function f(){var a,b;for(a=s.lights.length-1;a>=0;a--)b=s.lights[a],s.remove(b);for(r.clear(),a=0;a<config.background.LIGHT.count;a++)b=new FSS.Light(config.background.LIGHT.ambient,config.background.LIGHT.diffuse),b.ambientHex=b.ambient.format(),b.diffuseHex=b.diffuse.format(),s.add(b),b.mass=Math.randomInRange(.5,1),b.velocity=FSS.Vector3.create(),b.acceleration=FSS.Vector3.create(),b.force=FSS.Vector3.create(),b.ring=document.createElementNS(FSS.SVGNS,"circle"),b.ring.setAttributeNS(null,"stroke",b.ambientHex),b.ring.setAttributeNS(null,"stroke-width","0.5"),b.ring.setAttributeNS(null,"fill","none"),b.ring.setAttributeNS(null,"r","10"),b.core=document.createElementNS(FSS.SVGNS,"circle"),b.core.setAttributeNS(null,"fill",b.diffuseHex),b.core.setAttributeNS(null,"r","4")}function g(a,b){r.setSize(a,b),FSS.Vector3.set(B,r.halfWidth,r.halfHeight),e()}function h(){q=Date.now()-A,i(),j(),requestAnimationFrame(h)}function i(){var a,b,c,d,e,f,g,h=config.background.MESH.depth/2;for(FSS.Vector3.copy(config.background.LIGHT.bounds,B),FSS.Vector3.multiplyScalar(config.background.LIGHT.bounds,config.background.LIGHT.xyScalar),FSS.Vector3.setZ(C,config.background.LIGHT.zOffset),config.background.LIGHT.autopilot&&(a=Math.sin(config.background.LIGHT.step[0]*q*config.background.LIGHT.speed),b=Math.cos(config.background.LIGHT.step[1]*q*config.background.LIGHT.speed),FSS.Vector3.set(C,config.background.LIGHT.bounds[0]*a,config.background.LIGHT.bounds[1]*b,config.background.LIGHT.zOffset)),d=s.lights.length-1;d>=0;d--){e=s.lights[d],FSS.Vector3.setZ(e.position,config.background.LIGHT.zOffset);var i=Math.clamp(FSS.Vector3.distanceSquared(e.position,C),config.background.LIGHT.minDistance,config.background.LIGHT.maxDistance),j=config.background.LIGHT.gravity*e.mass/i;FSS.Vector3.subtractVectors(e.force,C,e.position),FSS.Vector3.normalise(e.force),FSS.Vector3.multiplyScalar(e.force,j),FSS.Vector3.set(e.acceleration),FSS.Vector3.add(e.acceleration,e.force),FSS.Vector3.add(e.velocity,e.acceleration),FSS.Vector3.multiplyScalar(e.velocity,config.background.LIGHT.dampening),FSS.Vector3.limit(e.velocity,config.background.LIGHT.minLimit,config.background.LIGHT.maxLimit),FSS.Vector3.add(e.position,e.velocity)}for(f=u.vertices.length-1;f>=0;f--)g=u.vertices[f],a=Math.sin(g.time+g.step[0]*q*config.background.MESH.speed),b=Math.cos(g.time+g.step[1]*q*config.background.MESH.speed),c=Math.sin(g.time+g.step[2]*q*config.background.MESH.speed),FSS.Vector3.set(g.position,config.background.MESH.xRange*u.segmentWidth*a,config.background.MESH.yRange*u.sliceHeight*b,config.background.MESH.zRange*h*c-h),FSS.Vector3.add(g.position,g.anchor);u.dirty=!0}function j(){if(r.render(s),config.background.LIGHT.draw){var a,b,c,d;for(a=s.lights.length-1;a>=0;a--)switch(d=s.lights[a],b=d.position[0],c=d.position[1],config.background.RENDER.renderer){case CANVAS:r.context.lineWidth=.5,r.context.beginPath(),r.context.arc(b,c,10,0,Math.PIM2),r.context.strokeStyle=d.ambientHex,r.context.stroke(),r.context.beginPath(),r.context.arc(b,c,4,0,Math.PIM2),r.context.fillStyle=d.diffuseHex,r.context.fill();break;case SVG:b+=r.halfWidth,c=r.halfHeight-c,d.core.setAttributeNS(null,"fill",d.diffuseHex),d.core.setAttributeNS(null,"cx",b),d.core.setAttributeNS(null,"cy",c),r.element.appendChild(d.core),d.ring.setAttributeNS(null,"stroke",d.ambientHex),d.ring.setAttributeNS(null,"cx",b),d.ring.setAttributeNS(null,"cy",c),r.element.appendChild(d.ring)}}}function k(){window.addEventListener("resize",n),o.addEventListener("click",l),o.addEventListener("mousemove",m)}function l(a){config.background.LIGHT.followMouseClicks&&(FSS.Vector3.set(C,a.x,r.height-a.y),FSS.Vector3.subtract(C,B),config.background.LIGHT.autopilot=!config.background.LIGHT.autopilot,z.updateDisplay())}function m(a){FSS.Vector3.set(C,a.x,r.height-a.y),FSS.Vector3.subtract(C,B)}function n(a){g(o.offsetWidth,o.offsetHeight),j()}var o=document.getElementById("background-container"),p=document.getElementById("background-output");if(config.background.enabled){initPlugin(),config.background.LIGHT.bounds=FSS.Vector3.create(),config.background.LIGHT.step=FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1));var q,r,s,t,u,v,w,x,y,z,A=Date.now(),B=FSS.Vector3.create(),C=FSS.Vector3.create();a()}}function centerModal(){$(this).css("display","block");var a=$(this).find(".modal-dialog"),b=($(window).height()-a.height())/2,c=a.css("marginBottom");c=parseInt(c),c>b&&(b=c),a.css("margin-top",b)}function headSize(){var a=$(window).width();if(a>767){var b=$("#logo-div").height(),c=$("#header-div h1").height(),d=b-c;$("#header-div").height(b),$("#header-div h1").css({marginTop:.7*d,marginBottom:.3*d})}else $("#header-div").css("height","auto"),$("#header-div h1").css({marginTop:20,marginBottom:0})}function postSuccess(){$("#email").val(""),$("#name").val(""),$("#message").val(""),$("#contactModal").modal("hide"),$("#submit-btn").removeClass("disabled").html("Submit")}function postContactToGoogle(){var a=$("#email").val(),b=$("#name").val(),c=$("#message").val();$.ajax({url:"https://docs.google.com/forms/d/1ktcGPGcod-sZeQMIA3O6HPkYdeLs4ywLns5gJqbPE9I/formResponse",data:{"entry.681134948":b,"entry.1528017034":a,"entry.963354231":c},type:"POST",dataType:"xml",statusCode:{0:function(){postSuccess()},200:function(){postSuccess()}}})}if(function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a){if(a instanceof Date)return a;if(String(a).match(g))return String(a).match(/^[0-9]*$/)&&(a=Number(a)),String(a).match(/\-/)&&(a=String(a).replace(/\-/g,"/")),new Date(a);throw new Error("Couldn't cast `"+a+"` to a date object.")}function c(a){return function(b){var c=b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(c)for(var e=0,f=c.length;f>e;++e){var g=c[e].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),i=new RegExp(g[0]),j=g[1]||"",k=g[3]||"",l=null;g=g[2],h.hasOwnProperty(g)&&(l=h[g],l=Number(a[l])),null!==l&&("!"===j&&(l=d(k,l)),""===j&&10>l&&(l="0"+l.toString()),b=b.replace(i,l.toString()))}return b=b.replace(/%%/,"%")}}function d(a,b){var c="s",d="";return a&&(a=a.replace(/(:|;|\s)/gi,"").split(/\,/),1===a.length?c=a[0]:(d=a[0],c=a[1])),1===Math.abs(b)?d:c}var e=100,f=[],g=[];g.push(/^[0-9]*$/.source),g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g=new RegExp(g.join("|"));var h={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},i=function(b,c,d){this.el=b,this.$el=a(b),this.interval=null,this.offset={},this.instanceNumber=f.length,f.push(this),this.$el.data("countdown-instance",this.instanceNumber),d&&(this.$el.on("update.countdown",d),this.$el.on("stoped.countdown",d),this.$el.on("finish.countdown",d)),this.setFinalDate(c),this.start()};a.extend(i.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var a=this;this.update(),this.interval=setInterval(function(){a.update.call(a)},e)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},pause:function(){this.stop.call(this)},resume:function(){this.start.call(this)},remove:function(){this.stop(),f[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(a){this.finalDate=b(a)},update:function(){return 0===this.$el.closest("html").length?void this.remove():(this.totalSecsLeft=this.finalDate.getTime()-(new Date).getTime(),this.totalSecsLeft=Math.ceil(this.totalSecsLeft/1e3),this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30),years:Math.floor(this.totalSecsLeft/60/60/24/365)},void(0===this.totalSecsLeft?(this.stop(),this.dispatchEvent("finish")):this.dispatchEvent("update")))},dispatchEvent:function(b){var d=a.Event(b+".countdown");d.finalDate=this.finalDate,d.offset=a.extend({},this.offset),d.strftime=c(this.offset),this.$el.trigger(d)}}),a.fn.countdown=function(){var b=Array.prototype.slice.call(arguments,0);return this.each(function(){var c=a(this).data("countdown-instance");if(void 0!==c){var d=f[c],e=b[0];i.prototype.hasOwnProperty(e)?d[e].apply(d,b.slice(1)):null===String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(d.setFinalDate.call(d,e),d.start()):a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,e))}else new i(this,b[0],b[1])})}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){
this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),$(function(){$("div.modal").on("show.bs.modal",function(){var a=this,b=a.id;window.location.hash=b,window.onhashchange=function(){location.hash||$(a).modal("hide")}}),$("div.modal").on("hide.bs.modal",function(){history.pushState("",document.title,window.location.pathname)})}),$(".modal").on("show.bs.modal",centerModal),$(window).on("resize",function(){$(".modal:visible").each(centerModal)}),$(function(){headSize()}),$(window).resize(function(){headSize()});var config={countdown:{year:2015,month:10,day:27,hour:12,minute:12,second:21}};$(function(){var a=($(document.body),$(window),document.createElement("canvas")),b=a.getContext&&a.getContext("2d")&&"none"!==$("#background-container").css("display");b&&(config.background={enabled:!0,RENDER:{renderer:"canvas"},MESH:{width:1.2,height:1.2,depth:10,segments:16,slices:8,xRange:.8,yRange:.1,zRange:1,ambient:"#555555",diffuse:"#FFFFFF",speed:5e-4},LIGHT:{count:2,xyScalar:1,zOffset:50,ambient:"#82A2FB",diffuse:"#97227B",speed:.001,gravity:1200,dampening:.15,minLimit:8,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!0,draw:!1}},initBackground())});var date=new Date(config.countdown.year,config.countdown.month-1,config.countdown.day,config.countdown.hour,config.countdown.minute,config.countdown.second),$countdownNumbers={days:$("#countdown-days"),hours:$("#countdown-hours"),minutes:$("#countdown-minutes"),seconds:$("#countdown-seconds")};$("#countdown").countdown(date).on("update.countdown",function(a){$countdownNumbers.days.text(a.offset.totalDays),$countdownNumbers.hours.text(("0"+a.offset.hours).slice(-2)),$countdownNumbers.minutes.text(("0"+a.offset.minutes).slice(-2)),$countdownNumbers.seconds.text(("0"+a.offset.seconds).slice(-2))}),$(function(){$("#contact-btn").on("click",function(a){a.preventDefault(),setTimeout(function(){$("#name").focus()},0)})}),$(".registration-form").submit(function(a){a.preventDefault(),$("#submit-btn").addClass("disabled").html('<span class="icon-spinner2"></span>'),postContactToGoogle()});